
@{
    ViewBag.Title = "PosMachineList";
    Layout = "~/Views/Shared/_LayoutHomeDialog.cshtml";
}

<script type="text/javascript">

    var listTable;

    $(document).ready(function () {
        listTable = $("#list_table").loadDataTable({
            url: "../Merchant/GetPosMachineList",
            pageIndex: 0,
            searchParams: $("#form1").serializeArray(),
            searchButtonId: "btn_Search",
            containerId: "form1",
            rowDataCombie: function (p_index, p_row) {
                var l_Strlimt = "";
                l_Strlimt += "@Html.IsInPermission("<a href=\\\"javascript:void(0)\\\" operate=\\\"selectin\\\"   class=\\\"a-btn a-btn-edit\\\"  >解绑</a>")";
                var l_StrRows = "";
                l_StrRows += "<tr>";
                l_StrRows += "<td class=\"no\" >" + (p_index + 1) + "</td>";
                l_StrRows += "<td class=\"overflow tipitem\" title=\"" + p_row.userName + "\"   >" + p_row.userName + "</td>";
                l_StrRows += "<td class=\"overflow\" title=\"" + p_row.clientCode + "\"   >" + p_row.clientCode + "</td>";
                l_StrRows += "<td class=\"overflow\" title=\"" + p_row.merchantName + "\">" + p_row.merchantName + "</td>";
                l_StrRows += "<td class=\"overflow\" title=\"" + p_row.deviceId + "\">" + p_row.deviceId + "</td>";
                l_StrRows += "<td class=\"overflow\" title=\"" + p_row.posMerchantNumber + "\">" + p_row.posMerchantNumber + "</td>";
                l_StrRows += "<td class=\"overflow\" title=\"" + p_row.contactName + "\">" + p_row.contactName + "</td>";
                l_StrRows += "<td class=\"overflow\" title=\"" + p_row.contactPhoneNumber + "\">" + p_row.contactPhoneNumber + "</td>";
                l_StrRows += "<td class=\"overflow\" title=\"" + p_row.statusName + "\">" + p_row.statusName + "</td>";
                l_StrRows += "<td class=\"operation\">";

                if (p_row.status != 4) {
                    l_StrRows += l_Strlimt;
                }

                l_StrRows += "</td>";
                l_StrRows += "</tr>";
                return l_StrRows;
            },
            operate: {
                "selectin": function (obj) {
                    art.dialog.confirm(
'确定要解绑商户代码为' + obj.clientCode + '的POS机ID为' + obj.deviceId + '的商户？',
function () {



    var array = new Array();
    array.push({ name: "merchantId", value: obj.id });
    array.push({ name: "posMachineId", value: obj.posMachineId });


    $.lumos.postJson({
        url: "/Biz/Merchant/UnbindPosMachine",
        data: array,
        success: function (d) {
            listTable.loadData();
            $.lumos.tips(d.message, true);
        }
    });


});
                }
            }
        });


    });




</script>

<form id="form1" name="form1">
    @Html.AntiForgeryToken()
    <div class="search-bar">
        <div class="filter">
            <span class="filter-label">商户代码 ：</span>
            <span class="filter-input">
                <input type="text" class="input-control" name="ClientCode" style="width:120px;" />
            </span>
        </div>
        <div class="filter">
            <span class="filter-label">商户名称 ：</span>
            <span class="filter-input">
                <input type="text" class="input-control" name="MerchantName" style="width:120px;" />
            </span>
        </div>
        <div class="filter">
            <span class="filter-label">	POS机设备ID ：</span>
            <span class="filter-input">
                <input type="text" class="input-control" name="DeviceId" style="width:120px;" />
            </span>
        </div>
        <div class="filter">
            <span class="filter-label">	POS机商户号 ：</span>
            <span class="filter-input">
                <input type="text" class="input-control" name="PosMerchantNumber" style="width:120px;" />
            </span>
        </div>
        <div class="filter"><input type="button" class="btn btn-search" id="btn_Search" value="查询" /> </div>

        <div class="filter" style="float:right">

        </div>
    </div>
    <div class="list">
        <table id="list_table" class="list-tb" cellpadding="0" cellspacing="0">
            <thead>
                <tr>
                    <th style="width:10%" class="no">
                        序号
                    </th>
                    <th style="width:10%">
                        账号
                    </th>
                    <th style="width:10%">
                        商户代码
                    </th>
                    <th style="width:10%">
                        商户名称
                    </th>
                    <th style="width:10%">
                        POS机设备ID
                    </th>
                    <th style="width:10%">
                        POS机商户号
                    </th>
                    <th style="width:10%">
                        联系人
                    </th>
                    <th style="width:10%">
                        联系电话
                    </th>
                    <th style="width:10%">
                        状态
                    </th>
                    <th style="width:10%">

                    </th>
                </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
                <tr>
                    <td colspan="10">
                        <div class="pull-left">

                        </div>
                        <div class="pull-right pagination">
                            <div class="pagination-info">

                            </div>
                            <div class="pagination-index">

                            </div>
                            <div class="pagination-goto">

                            </div>
                        </div>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</form>
